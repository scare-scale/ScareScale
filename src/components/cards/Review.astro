---
import Prose from "../Prose.astro";

const { review } = Astro.props;
---

<div
  class="max-w-2xl lg:max-w-2xl mx-auto px-4 lg:px-6 py-6 grid place-items-center min-w-sm"
>
  <article
    class="w-full bg-black text-white rounded-2xl shadow-2xl overflow-hidden border border-gray-800"
  >
    <!-- Header -->
    <header
      class="px-6 py-5 border-b border-gray-700 flex items-center justify-between"
    >
      <h1
        class="text-3xl font-extrabold tracking-tight flex items-center gap-3"
      >
        <img
          class="w-7 h-7"
          src={`/icons/${review.type}.svg`}
          alt={`${review.type} icon`}
          title={review.type}
        />
        <span>{review.type.charAt(0).toUpperCase() + review.type.slice(1)}</span
        >
      </h1>
      <div class="text-xl font-bold bg-gray-900 px-3 py-1 rounded-lg shadow-sm">
        {review.overallRating} / 10
      </div>
    </header>

    <!-- Category Scores -->
    <section
      class="px-6 py-5 flex flex-wrap gap-4"
      aria-label="Scare Scale Categories"
    >
      {
        Object.entries(review.categories).map(([categoryName, score]) => (
          <div
            class="flex items-center gap-2 bg-gray-900 text-white px-3 py-1 rounded-full border border-gray-700 hover:scale-105 transition-transform"
            title={`${categoryName}: ${score}`}
          >
            <img
              class="w-5 h-5"
              src={`/icons/categories/${categoryName}.svg`}
              alt={`${categoryName} icon`}
            />
            <span class="font-semibold">
              {categoryName.charAt(0).toUpperCase() + categoryName.slice(1)}
            </span>
            <span class="font-bold">{score}</span>
          </div>
        ))
      }
    </section>

    <!-- Review Content -->
    <section class="px-6 py-6 bg-gray-950" aria-label="Review Content">
      {
        review.content?.trim() ? (
          <Prose textColour="white">{review.content}</Prose>
        ) : (
          <div class="text-gray-400 italic text-center">
            No written review provided.
          </div>
        )
      }
    </section>
  </article>
</div>
